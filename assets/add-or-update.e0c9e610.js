var ue=Object.defineProperty,ne=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var L=(e,l,u)=>l in e?ue(e,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[l]=u,h=(e,l)=>{for(var u in l||(l={}))ae.call(l,u)&&L(e,u,l[u]);if(U)for(var u of U(l))oe.call(l,u)&&L(e,u,l[u]);return e},A=(e,l)=>ne(e,re(l));import{cC as M,bD as P,bv as H,cD as W,bA as se,cE as G,cF as ie,cG as de,cH as ce,cI as me,cJ as fe,u as pe,A as J,aO as D,g as F,U as Q,f as O,aN as w,w as ve,bP as ge,av as he,bb as _e,r as y,ae as N,y as be,af as q,_ as ke,aI as Ce,o as V,m as S,p as g,Q as p,k as ye,aJ as Ee,a3 as Ae,H as Fe,aE as Ve,an as z,cK as Ne,cL as xe,aV as De,bn as Be,V as Se}from"./index.3bdb25d9.js";import{E as Ie}from"./dialog.e3a021d0.js";import"./overlay.8739d102.js";/* empty css               */import{E as we,a as Ke}from"./form-item.9838b7ac.js";import{_ as K}from"./tree.3652bf65.js";import{u as Oe}from"./role.a39e6ffc.js";import{u as Te}from"./orgs.846918b8.js";import"./index.5a7c4eec.js";function Ue(e){return e}function Le(e,l,u){switch(u.length){case 0:return e.call(l);case 1:return e.call(l,u[0]);case 2:return e.call(l,u[0],u[1]);case 3:return e.call(l,u[0],u[1],u[2])}return e.apply(l,u)}var Me=800,Pe=16,qe=Date.now;function Re(e){var l=0,u=0;return function(){var a=qe(),n=Pe-(a-u);if(u=a,n>0){if(++l>=Me)return arguments[0]}else l=0;return e.apply(void 0,arguments)}}function $e(e){return function(){return e}}var He=M?function(e,l){return M(e,"toString",{configurable:!0,enumerable:!1,value:$e(l),writable:!0})}:Ue,We=He,Ge=Re(We),Je=Ge,R=Math.max;function Qe(e,l,u){return l=R(l===void 0?e.length-1:l,0),function(){for(var a=arguments,n=-1,o=R(a.length-l,0),r=Array(o);++n<o;)r[n]=a[l+n];n=-1;for(var t=Array(l+1);++n<l;)t[n]=a[n];return t[l]=u(r),Le(e,this,t)}}var $=P?P.isConcatSpreadable:void 0;function ze(e){return H(e)||W(e)||!!($&&e&&e[$])}function X(e,l,u,a,n){var o=-1,r=e.length;for(u||(u=ze),n||(n=[]);++o<r;){var t=e[o];l>0&&u(t)?l>1?X(t,l-1,u,a,n):se(n,t):a||(n[n.length]=t)}return n}function Xe(e){var l=e==null?0:e.length;return l?X(e,1):[]}function Ye(e){return Je(Qe(e,void 0,Xe),e+"")}function Ze(e,l){return e!=null&&l in Object(e)}function je(e,l,u){l=G(l,e);for(var a=-1,n=l.length,o=!1;++a<n;){var r=ie(l[a]);if(!(o=e!=null&&u(e,r)))break;e=e[r]}return o||++a!=n?o:(n=e==null?0:e.length,!!n&&de(n)&&ce(r,n)&&(H(e)||W(e)))}function el(e,l){return e!=null&&je(e,l,Ze)}function ll(e,l,u){for(var a=-1,n=l.length,o={};++a<n;){var r=l[a],t=me(e,r);u(t,r)&&fe(o,G(r,e),t)}return o}function tl(e,l){return ll(e,l,function(u,a){return el(e,a)})}var ul=Ye(function(e,l){return e==null?{}:tl(e,l)}),B=ul;const nl=(e,{attrs:l},{tree:u,key:a})=>{const n=pe("tree-select"),o=A(h(h({},B(J(e),Object.keys(D.props))),l),{valueKey:a,popperClass:F(()=>{const r=[n.e("popper")];return e.popperClass&&r.push(e.popperClass),r.join(" ")}),filterMethod:(r="")=>{e.filterMethod&&e.filterMethod(r),Q(()=>{var t;(t=u.value)==null||t.filter(r)})},onVisibleChange:r=>{var t;(t=l.onVisibleChange)==null||t.call(l,r),e.filterable&&r&&o.filterMethod()}});return o},rl=O({extends:w,setup(e,l){const u=w.setup(e,l);return delete u.selectOptionClick,u},methods:{selectOptionClick(){this.$el.parentElement.click()}}}),al=(e,{attrs:l,slots:u,emit:a},{select:n,tree:o,key:r})=>{ve(()=>e.modelValue,()=>{e.showCheckbox&&Q(()=>{const s=o.value;s&&!ge(s.getCheckedKeys(),I(e.modelValue))&&s.setCheckedKeys(I(e.modelValue))})},{immediate:!0,deep:!0});const t=F(()=>h({value:r.value},e.props)),_=(s,d)=>{var m;const f=t.value[s];return _e(f)?f(d,(m=o.value)==null?void 0:m.getNode(_("value",d))):d[f]};return A(h(h({},B(J(e),Object.keys(K.props))),l),{nodeKey:r,expandOnClickNode:F(()=>!e.checkStrictly),defaultExpandedKeys:F(()=>{const s=I(e.modelValue),d=o.value?s.map(m=>{var f,k,b;return(b=(k=(f=o.value)==null?void 0:f.getNode(m))==null?void 0:k.parent)==null?void 0:b.key}).filter(m=>Y(m)):s;return e.defaultExpandedKeys?e.defaultExpandedKeys.concat(d):d}),renderContent:(s,{node:d,data:m,store:f})=>s(rl,{value:_("value",m),label:_("label",m),disabled:_("disabled",m)},e.renderContent?()=>e.renderContent(s,{node:d,data:m,store:f}):u.default?()=>u.default({node:d,data:m,store:f}):void 0),filterNodeMethod:(s,d,m)=>{var f;return e.filterNodeMethod?e.filterNodeMethod(s,d,m):s?(f=_("label",d))==null?void 0:f.includes(s):!0},onNodeClick:(s,d,m)=>{var f,k,b;if((f=l.onNodeClick)==null||f.call(l,s,d,m),(e.checkStrictly&&e.showCheckbox?e.checkOnClickNode:e.checkStrictly)||d.isLeaf){if(!_("disabled",s)){const v=(k=n.value)==null?void 0:k.options.get(_("value",s));(b=n.value)==null||b.handleOptionSelect(v,!0)}}else m.proxy.handleExpandIconClick()},onCheck:(s,d)=>{var m,f;(m=l.onCheck)==null||m.call(l,s,d);const k=e.checkStrictly?d.checkedKeys:(f=o.value)==null?void 0:f.getCheckedKeys(!0),b=_("value",s);a(he,e.multiple?k:k.includes(b)?b:void 0)}})};function Y(e){return e||e===0}function I(e){return Array.isArray(e)?e:Y(e)?[e]:[]}const ol=O({name:"ElTreeSelect",inheritAttrs:!1,props:h(h({},D.props),K.props),setup(e,l){const{slots:u,expose:a}=l,n=y(),o=y(),r=F(()=>e.nodeKey||e.valueKey||"value"),t=nl(e,l,{select:n,tree:o,key:r}),_=al(e,l,{select:n,tree:o,key:r}),s=N({});return a(s),be(()=>{Object.assign(s,h(h({},B(o.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),B(n.value,["focus","blur"])))}),()=>q(D,N(A(h({},t),{ref:d=>n.value=d})),A(h({},u),{default:()=>q(K,N(A(h({},_),{ref:d=>o.value=d})))}))}});var x=ke(ol,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);x.install=e=>{e.component(x.name,x)};const sl=x,il=sl;const dl=z("\u53D6\u6D88"),cl=z("\u786E\u5B9A"),yl=O({__name:"add-or-update",emits:["refreshDataList"],setup(e,{expose:l,emit:u}){const a=y(!1),n=y([]),o=y([]),r=y(),t=N({id:"",realName:"",nickName:"",passWord:"",mobile:"",userAcct:"",roleIds:[],branchId:"",remark:""}),_=v=>{a.value=!0,t.id="",r.value&&r.value.resetFields(),v?f(v):d(),m()},s=F(()=>{var v;return(v=Ce.userStore)==null?void 0:v.user.userId}),d=()=>{Oe({queryUserId:s.value}).then(v=>{n.value=v.data.userRoles})},m=()=>{Te().then(v=>{o.value=v.data})},f=v=>{Ne(v).then(i=>{Object.assign(t,i.data),delete t.passWord,delete t.roleIds})},k=y({realName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],passWord:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],mobile:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],userAcct:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],branchId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],roleIds:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),b=()=>{r.value.validate(v=>{if(!v)return!1;xe(t).then(()=>{De.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{a.value=!1,u("refreshDataList")}})})})};return l({init:_}),(v,i)=>{const E=Be,C=we,Z=il,j=w,ee=D,le=Ke,T=Se,te=Ie;return V(),S(te,{modelValue:a.value,"onUpdate:modelValue":i[11]||(i[11]=c=>a.value=c),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:g(()=>[p(T,{onClick:i[9]||(i[9]=c=>a.value=!1)},{default:g(()=>[dl]),_:1}),p(T,{type:"primary",onClick:i[10]||(i[10]=c=>b())},{default:g(()=>[cl]),_:1})]),default:g(()=>[p(le,{ref_key:"dataFormRef",ref:r,model:t,rules:k.value,"label-width":"120px",onKeyup:i[8]||(i[8]=Ve(c=>b(),["enter"]))},{default:g(()=>[p(C,{label:"\u771F\u5B9E\u59D3\u540D",prop:"realName"},{default:g(()=>[p(E,{modelValue:t.realName,"onUpdate:modelValue":i[0]||(i[0]=c=>t.realName=c),placeholder:"\u771F\u5B9E\u59D3\u540D",maxlength:"16"},null,8,["modelValue"])]),_:1}),p(C,{label:"\u6635\u79F0",prop:"nickName"},{default:g(()=>[p(E,{modelValue:t.nickName,"onUpdate:modelValue":i[1]||(i[1]=c=>t.nickName=c),placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",maxlength:"16"},null,8,["modelValue"])]),_:1}),p(C,{label:"\u5BC6\u7801",prop:t.id?"":"passWord"},{default:g(()=>[p(E,{modelValue:t.passWord,"onUpdate:modelValue":i[2]||(i[2]=c=>t.passWord=c),type:"password","show-password":"","auto-complete":"new-password",placeholder:t.id?"\u9ED8\u8BA4\u4E3A\u7A7A\u4E0D\u4FEE\u6539\u5BC6\u7801":"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue","placeholder"])]),_:1},8,["prop"]),p(C,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:g(()=>[p(E,{modelValue:t.mobile,"onUpdate:modelValue":i[3]||(i[3]=c=>t.mobile=c),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),p(C,{label:"\u8D26\u53F7",prop:"userAcct"},{default:g(()=>[p(E,{modelValue:t.userAcct,"onUpdate:modelValue":i[4]||(i[4]=c=>t.userAcct=c),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue"])]),_:1}),p(C,{prop:"branchId",label:"\u6240\u5C5E\u673A\u6784"},{default:g(()=>[p(Z,{modelValue:t.branchId,"onUpdate:modelValue":i[5]||(i[5]=c=>t.branchId=c),"check-strictly":"",data:o.value,"value-key":"id",props:{label:"name",children:"childBranch"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),t.id?Fe("",!0):(V(),S(C,{key:0,label:"\u89D2\u8272",prop:"roleIds"},{default:g(()=>[p(ee,{modelValue:t.roleIds,"onUpdate:modelValue":i[6]||(i[6]=c=>t.roleIds=c),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",multiple:"",clearable:""},{default:g(()=>[(V(!0),ye(Ae,null,Ee(n.value,c=>(V(),S(j,{key:c.roleId,label:c.roleName,value:c.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),p(C,{label:"\u5907\u6CE8",prop:"remark"},{default:g(()=>[p(E,{type:"textarea",modelValue:t.remark,"onUpdate:modelValue":i[7]||(i[7]=c=>t.remark=c),maxlength:"128",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{yl as default};
