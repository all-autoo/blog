import{f as X,r as i,ae as y,o as n,m as s,p as t,Q as u,aG as Y,H as b,B as k,k as C,aJ as V,a3 as x,t as Z,an as d,C as ee,aE as le,cv as oe,cS as te,cT as ue,cU as ae,cV as ne,cW as re,aV as se,cX as ie,cY as de,bn as pe,V as me,aN as _e,aO as ve}from"./index.3bdb25d9.js";import{E as fe}from"./dialog.e3a021d0.js";import"./overlay.8739d102.js";import{E as be,a as ce}from"./form-item.9838b7ac.js";import{E as Ee}from"./input-number.f025cb34.js";import{E as ge}from"./popover.1be93e87.js";import{E as ye}from"./row.86ae0270.js";/* empty css               */import{E as ke}from"./tree.3652bf65.js";import{_ as Ce}from"./index.082d1058.js";import{_ as Ve}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.ab770dd7.js";import"./dropdown.2f11d886.js";import"./index.5a7c4eec.js";const xe=d("\u83DC\u5355"),Fe=d("\u6309\u94AE"),Be=d("\u63A5\u53E3"),De=d("\u5173\u95ED"),Ne={class:"mod__menu-icon-inner"},Ae={class:"mod__menu-icon-list"},he=d("\u5173\u95ED"),we=d("\u53D6\u6D88"),Le=d("\u786E\u5B9A"),Te=X({__name:"add-or-update",emits:["refreshDataList"],setup(Ue,{expose:T,emit:U}){const p=i(!1),m=i(!1),_=i(!1),F=i([]),B=i([]),D=i(),c=i(),o=y({id:"",buttonType:"",hide:0,menuLogo:"",orderNum:0,parentId:"",parentName:"",permissionName:"",permissionType:0,remark:"",url:""}),I=y([{value:"save",label:"\u65B0\u589E"},{value:"update",label:"\u4FEE\u6539"},{value:"select",label:"\u67E5\u8BE2"},{value:"delete",label:"\u5220\u9664"},{value:"up",label:"\u4E0A\u4F20"},{value:"down",label:"\u4E0B\u8F7D"}]),$=y([{value:0,label:"\u663E\u793A"},{value:1,label:"\u9690\u85CF"}]),M=a=>{p.value=!0,o.id="",c.value&&c.value.resetFields(),a?H(a):E(),R(),B.value=oe()},O=()=>{E()},R=()=>{te({current:1,size:1e3}).then(a=>{const e=ue(a.data.records);F.value=[{id:"",permissionName:"\u4E3B\u7C7B\u76EE",children:e}]})},H=a=>{ae({id:a}).then(e=>{if(Object.assign(o,e.data),o.parentId=="")return E();D.value.setCurrentKey(o.parentId)})},E=()=>{o.parentId="",o.parentName="\u4E3B\u7C7B\u76EE"},S=a=>{o.parentId=a.id,o.parentName=a.permissionName,m.value=!1},j=a=>{o.menuLogo=a,_.value=!1},z=i({permissionName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],url:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),N=()=>{c.value.validate(a=>{if(!a)return!1;(o.id?ne:re)(o).then(()=>{se.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{p.value=!1,U("refreshDataList")}})})})};return T({init:M}),(a,e)=>{const g=ie,A=de,r=be,v=pe,h=Ce,K=ke,f=me,w=ye,L=ge,P=_e,q=ve,G=Ee,J=ce,Q=fe;return n(),s(Q,{modelValue:p.value,"onUpdate:modelValue":e[20]||(e[20]=l=>p.value=l),title:o.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:t(()=>[u(f,{onClick:e[18]||(e[18]=l=>p.value=!1)},{default:t(()=>[we]),_:1}),u(f,{type:"primary",onClick:e[19]||(e[19]=l=>N())},{default:t(()=>[Le]),_:1})]),default:t(()=>[u(J,{ref_key:"dataFormRef",ref:c,model:o,rules:z.value,"label-width":"120px",onKeyup:e[17]||(e[17]=le(l=>N(),["enter"]))},{default:t(()=>[u(r,{prop:"type",label:"\u7C7B\u578B"},{default:t(()=>[u(A,{modelValue:o.permissionType,"onUpdate:modelValue":e[0]||(e[0]=l=>o.permissionType=l),disabled:!!o.id,onChange:e[1]||(e[1]=l=>O())},{default:t(()=>[u(g,{label:0},{default:t(()=>[xe]),_:1}),u(g,{label:1},{default:t(()=>[Fe]),_:1}),u(g,{label:2},{default:t(()=>[Be]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),u(r,{prop:"permissionName",label:"\u83DC\u5355\u540D\u79F0"},{default:t(()=>[u(v,{modelValue:o.permissionName,"onUpdate:modelValue":e[2]||(e[2]=l=>o.permissionName=l),placeholder:"\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{prop:"parentId",label:"\u4E0A\u7EA7\u83DC\u5355",class:"popover-list"},{default:t(()=>[u(L,{ref:"menuListPopover",visible:m.value,"onUpdate:visible":e[7]||(e[7]=l=>m.value=l),placement:"bottom-start",trigger:"click",width:400},{reference:t(()=>[u(v,{modelValue:o.parentName,"onUpdate:modelValue":e[4]||(e[4]=l=>o.parentName=l),readonly:!0,placeholder:"\u4E0A\u7EA7\u83DC\u5355",onClick:e[5]||(e[5]=l=>m.value=!0)},{suffix:t(()=>[o.parentId!=="0"?(n(),s(h,{key:0,icon:"icon-close-circle",onClick:e[3]||(e[3]=Y(l=>E(),["stop"]))})):b("",!0)]),_:1},8,["modelValue"])]),default:t(()=>[k("div",null,[u(K,{ref_key:"menuListTree",ref:D,data:F.value,props:{label:"permissionName",children:"children"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:"",onCurrentChange:S},null,8,["data"])]),u(w,{justify:"end"},{default:t(()=>[u(f,{type:"primary",link:"",style:{"margin-right":"15px"},onClick:e[6]||(e[6]=l=>m.value=!1)},{default:t(()=>[De]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1}),o.permissionType!==1?(n(),s(r,{key:0,prop:"url",label:"\u6743\u9650\u5730\u5740"},{default:t(()=>[u(v,{modelValue:o.url,"onUpdate:modelValue":e[8]||(e[8]=l=>o.url=l),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740"},null,8,["modelValue"])]),_:1})):b("",!0),o.permissionType===1?(n(),s(r,{key:1,label:"\u6309\u94AE\u7C7B\u578B",prop:"buttonType"},{default:t(()=>[u(q,{modelValue:o.buttonType,"onUpdate:modelValue":e[9]||(e[9]=l=>o.buttonType=l),placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B"},{default:t(()=>[(n(!0),C(x,null,V(I,l=>(n(),s(P,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):b("",!0),u(r,{prop:"sort",label:"\u6392\u5E8F"},{default:t(()=>[u(G,{modelValue:o.orderNum,"onUpdate:modelValue":e[10]||(e[10]=l=>o.orderNum=l),"controls-position":"right",min:0,label:"\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),o.permissionType===0?(n(),s(r,{key:2,prop:"icon",label:"\u56FE\u6807",class:"popover-list"},{default:t(()=>[u(L,{ref:"iconListPopover",visible:_.value,"onUpdate:visible":e[14]||(e[14]=l=>_.value=l),placement:"top-start",trigger:"click",width:450,"popper-class":"mod__menu-icon-popover"},{reference:t(()=>[u(v,{modelValue:o.menuLogo,"onUpdate:modelValue":e[11]||(e[11]=l=>o.menuLogo=l),readonly:!0,placeholder:"\u56FE\u6807",onClick:e[12]||(e[12]=l=>_.value=!0)},null,8,["modelValue"])]),default:t(()=>[k("div",Ne,[k("div",Ae,[(n(!0),C(x,null,V(B.value,(l,W)=>(n(),s(f,{key:W,class:Z({"is-active":o.menuLogo===l}),onClick:Ie=>j(l)},{default:t(()=>[u(h,{icon:l},null,8,["icon"])]),_:2},1032,["class","onClick"]))),128))])]),u(w,{justify:"end"},{default:t(()=>[u(f,{type:"primary",link:"",style:{"margin-right":"15px"},onClick:e[13]||(e[13]=l=>_.value=!1)},{default:t(()=>[he]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1})):b("",!0),o.permissionType===0?(n(),s(r,{key:3,label:"\u663E\u793A\u72B6\u6001"},{default:t(()=>[u(A,{modelValue:o.hide,"onUpdate:modelValue":e[15]||(e[15]=l=>o.hide=l)},{default:t(()=>[(n(!0),C(x,null,V($,l=>(n(),s(g,{key:l.value,label:l.value},{default:t(()=>[d(ee(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})):b("",!0),u(r,{label:"\u5907\u6CE8"},{default:t(()=>[u(v,{modelValue:o.remark,"onUpdate:modelValue":e[16]||(e[16]=l=>o.remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",maxlength:"64"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var We=Ve(Te,[["__scopeId","data-v-7258ab39"]]);export{We as default};
