var ae=Object.defineProperty,ue=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var Y=(r,s,u)=>s in r?ae(r,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[s]=u,j=(r,s)=>{for(var u in s||(s={}))oe.call(s,u)&&Y(r,u,s[u]);if(L)for(var u of L(s))pe.call(s,u)&&Y(r,u,s[u]);return r},G=(r,s)=>ue(r,se(s));import{b as ce,bF as de,a as b,cf as be,ce as me,ci as N,aE as _e,f as he,Z as fe,u as ge,r as ve,ae as Ne,cg as xe,g as v,aF as y,$ as we,cj as Ve,w as ye,y as Ie,aA as Ee,o as _,k as F,ag as R,l as t,t as z,aN as I,P as C,p as H,m as E,Y as ke,ck as Se,E as J,a2 as W,bL as Pe,aD as Ae,bJ as D,aO as Fe,_ as ze,h as Ce,bd as Z,v as De}from"./index.a7d776d7.js";import{v as q}from"./index.c373d696.js";const Te=ce({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:de,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||b(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)}}),Be={[be]:(r,s)=>r!==s,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[me]:r=>b(r)||N(r),[_e]:r=>b(r)||N(r)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=he(G(j({},Oe),{props:Te,emits:Be,setup(r,{expose:s,emit:u}){const l=r,{t:T}=fe(),d=ge("input-number"),f=ve(),o=Ne({currentValue:l.modelValue,userInput:null}),{formItem:h}=xe(),B=v(()=>b(l.modelValue)&&x(l.modelValue,-1)<l.min),K=v(()=>b(l.modelValue)&&x(l.modelValue)>l.max),Q=v(()=>{const e=U(l.step);return y(l.precision)?Math.max(U(l.modelValue),e):(e>l.precision,l.precision)}),k=v(()=>l.controls&&l.controlsPosition==="right"),M=we(),g=Ve(),X=v(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(N(e))return"";if(b(e)){if(Number.isNaN(e))return"";y(l.precision)||(e=e.toFixed(l.precision))}return e}),O=(e,n)=>{if(y(n)&&(n=Q.value),n===0)return Math.round(e);let i=String(e);const a=i.indexOf(".");if(a===-1||!i.replace(".","").split("")[a+n])return e;const w=i.length;return i.charAt(w-1)==="5"&&(i=`${i.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(i).toFixed(n))},U=e=>{if(N(e))return 0;const n=e.toString(),i=n.indexOf(".");let a=0;return i!==-1&&(a=n.length-i-1),a},x=(e,n=1)=>b(e)?O(e+l.step*n):o.currentValue,S=()=>{if(g.value||K.value)return;const e=l.modelValue||0,n=x(e);A(n)},P=()=>{if(g.value||B.value)return;const e=l.modelValue||0,n=x(e,-1);A(n)},$=(e,n)=>{const{max:i,min:a,step:p,precision:m,stepStrictly:w,valueOnClear:V}=l;let c=Number(e);if(N(e)||Number.isNaN(c))return null;if(e===""){if(V===null)return null;c=Ce(V)?{min:a,max:i}[V]:V}return w&&(c=Math.round(c/p)*p),y(m)||(c=O(c,m)),(c>i||c<a)&&(c=c>i?i:a,n&&u("update:modelValue",c)),c},A=e=>{var n;const i=o.currentValue,a=$(e);i!==a&&(o.userInput=null,u("update:modelValue",a),u("input",a),u("change",a,i),(n=h==null?void 0:h.validate)==null||n.call(h,"change").catch(p=>Z()),o.currentValue=a)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&A(n),o.userInput=null},re=()=>{var e,n;(n=(e=f.value)==null?void 0:e.focus)==null||n.call(e)},te=()=>{var e,n;(n=(e=f.value)==null?void 0:e.blur)==null||n.call(e)},le=e=>{u("focus",e)},ie=e=>{var n;u("blur",e),(n=h==null?void 0:h.validate)==null||n.call(h,"blur").catch(i=>Z())};return ye(()=>l.modelValue,e=>{o.currentValue=$(e,!0),o.userInput=null},{immediate:!0}),Ie(()=>{var e;const{min:n,max:i,modelValue:a}=l,p=(e=f.value)==null?void 0:e.input;if(p.setAttribute("role","spinbutton"),Number.isFinite(i)?p.setAttribute("aria-valuemax",String(i)):p.removeAttribute("aria-valuemax"),Number.isFinite(n)?p.setAttribute("aria-valuemin",String(n)):p.removeAttribute("aria-valuemin"),p.setAttribute("aria-valuenow",String(o.currentValue)),p.setAttribute("aria-disabled",String(g.value)),!b(a)&&a!=null){let m=Number(a);Number.isNaN(m)&&(m=null),u("update:modelValue",m)}}),Ee(()=>{var e;const n=(e=f.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),s({focus:re,blur:te}),(e,n)=>(_(),F("div",{class:z([t(d).b(),t(d).m(t(M)),t(d).is("disabled",t(g)),t(d).is("without-controls",!e.controls),t(d).is("controls-right",t(k))]),onDragstart:n[0]||(n[0]=D(()=>{},["prevent"]))},[e.controls?R((_(),F("span",{key:0,role:"button","aria-label":t(T)("el.inputNumber.decrease"),class:z([t(d).e("decrease"),t(d).is("disabled",t(B))]),onKeydown:I(P,["enter"])},[C(t(J),null,{default:H(()=>[t(k)?(_(),E(t(ke),{key:0})):(_(),E(t(Se),{key:1}))]),_:1})],42,Ke)),[[t(q),P]]):W("v-if",!0),e.controls?R((_(),F("span",{key:1,role:"button","aria-label":t(T)("el.inputNumber.increase"),class:z([t(d).e("increase"),t(d).is("disabled",t(K))]),onKeydown:I(S,["enter"])},[C(t(J),null,{default:H(()=>[t(k)?(_(),E(t(Pe),{key:0})):(_(),E(t(Ae),{key:1}))]),_:1})],42,Me)),[[t(q),S]]):W("v-if",!0),C(t(Fe),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":t(X),placeholder:e.placeholder,disabled:t(g),size:t(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(D(S,["prevent"]),["up"]),I(D(P,["prevent"]),["down"])],onBlur:ie,onFocus:le,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var $e=ze(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ge=De($e);export{Ge as E};
