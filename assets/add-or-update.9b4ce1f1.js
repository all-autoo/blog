import{f as U,r as n,ae as $,o as E,m as b,p as r,Q as a,aG as h,H as R,B as T,aE as H,an as f,aV as K,bn as j,V as M}from"./index.062059f7.js";import{E as P}from"./dialog.00de49d5.js";import"./overlay.343072da.js";import{E as S,a as q}from"./form-item.145b9d23.js";import{E as G}from"./input-number.8c44d1ed.js";import{E as Q}from"./popover.06f42fd1.js";import{E as z}from"./row.cc8bcc57.js";/* empty css               */import{E as J}from"./tree.4e077dea.js";import{_ as W}from"./index.a763ada6.js";import{u as X,a as Y,b as Z}from"./orgs.8a46fe28.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.f5781167.js";import"./dropdown.bef3776a.js";import"./index.c076b86d.js";const te={class:"popover-pop-body"},oe=f("\u5173\u95ED"),re=f("\u53D6\u6D88"),ae=f("\u786E\u5B9A"),le=U({__name:"add-or-update",emits:["refreshDataList"],setup(ne,{expose:V,emit:y}){const s=n(!1),u=n(!1),_=n([]),c=n(),i=n(),t=$({id:"",name:"",parentId:"",parentName:"",orderNum:0}),C=l=>{s.value=!0,t.id="",i.value&&i.value.resetFields(),l?F(l):p(),k()},k=()=>X().then(l=>{_.value=l.data}),F=l=>{Y(l).then(e=>{if(Object.assign(t,e.data),t.parentId=="")return p();c.value.setCurrentKey(t.parentId)})},p=()=>{t.parentId="",t.parentName=""},N=l=>{t.parentId=l.id,t.parentName=l.name,u.value=!1},A=n({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=()=>{i.value.validate(l=>{if(!l)return!1;Z(t).then(()=>{K.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{s.value=!1,y("refreshDataList")}})})})};return V({init:C}),(l,e)=>{const g=j,d=S,D=W,x=J,m=M,I=z,B=Q,L=G,O=q,w=P;return E(),b(w,{modelValue:s.value,"onUpdate:modelValue":e[10]||(e[10]=o=>s.value=o),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:r(()=>[a(m,{onClick:e[8]||(e[8]=o=>s.value=!1)},{default:r(()=>[re]),_:1}),a(m,{type:"primary",onClick:e[9]||(e[9]=o=>v())},{default:r(()=>[ae]),_:1})]),default:r(()=>[a(O,{ref_key:"dataFormRef",ref:i,model:t,rules:A.value,"label-width":"120px",onKeyup:e[7]||(e[7]=H(o=>v(),["enter"]))},{default:r(()=>[a(d,{prop:"name",label:"\u540D\u79F0"},{default:r(()=>[a(g,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(d,{prop:"parentName",label:"\u4E0A\u7EA7\u673A\u6784",class:"org-list"},{default:r(()=>[a(B,{ref:"orgListPopover",visible:u.value,"onUpdate:visible":e[5]||(e[5]=o=>u.value=o),placement:"bottom-start",trigger:"click",width:400,"popper-class":"popover-pop"},{reference:r(()=>[a(g,{modelValue:t.parentName,"onUpdate:modelValue":e[2]||(e[2]=o=>t.parentName=o),readonly:!0,placeholder:"\u4E0A\u7EA7\u673A\u6784",onClick:e[3]||(e[3]=o=>u.value=!0)},{suffix:r(()=>[t.parentId!==""?(E(),b(D,{key:0,icon:"icon-close-circle",onClick:e[1]||(e[1]=h(o=>p(),["stop"]))})):R("",!0)]),_:1},8,["modelValue"])]),default:r(()=>[T("div",te,[a(x,{ref_key:"orgListTree",ref:c,data:_.value,props:{label:"name",children:"childBranch"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:"",onCurrentChange:N},null,8,["data"])]),a(I,{justify:"end"},{default:r(()=>[a(m,{type:"primary",link:"",style:{"margin-right":"15px"},onClick:e[4]||(e[4]=o=>u.value=!1)},{default:r(()=>[oe]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1}),a(d,{prop:"orderNum",label:"\u6392\u5E8F"},{default:r(()=>[a(L,{modelValue:t.orderNum,"onUpdate:modelValue":e[6]||(e[6]=o=>t.orderNum=o),"controls-position":"right",min:0,label:"\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var Ce=ee(le,[["__scopeId","data-v-6f370823"]]);export{Ce as default};
