var ae=Object.defineProperty,ue=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var H=(r,s,u)=>s in r?ae(r,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[s]=u,L=(r,s)=>{for(var u in s||(s={}))oe.call(s,u)&&H(r,u,s[u]);if(G)for(var u of G(s))pe.call(s,u)&&H(r,u,s[u]);return r},R=(r,s)=>ue(r,se(s));import{b as ce,c7 as de,a as b,ax as be,ay as me,cz as N,av as _e,f as he,$ as fe,u as ge,r as ve,ae as Ne,az as xe,g as v,b5 as y,a0 as we,aC as Ve,w as ye,y as Ie,b1 as Ee,o as _,k as A,ag as Y,l as t,t as C,aE as I,Q as F,p as j,m as E,Z as ke,cA as Se,E as Q,H as W,cc as Pe,b4 as ze,aG as D,bn as Ae,_ as Ce,h as Fe,aD as Z,v as De}from"./index.062059f7.js";import{v as q}from"./index.f5781167.js";const Te=ce({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:de,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||b(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)}}),Be={[be]:(r,s)=>r!==s,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[me]:r=>b(r)||N(r),[_e]:r=>b(r)||N(r)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=he(R(L({},Oe),{props:Te,emits:Be,setup(r,{expose:s,emit:u}){const l=r,{t:T}=fe(),d=ge("input-number"),f=ve(),o=Ne({currentValue:l.modelValue,userInput:null}),{formItem:h}=xe(),B=v(()=>b(l.modelValue)&&x(l.modelValue,-1)<l.min),K=v(()=>b(l.modelValue)&&x(l.modelValue)>l.max),J=v(()=>{const e=U(l.step);return y(l.precision)?Math.max(U(l.modelValue),e):(e>l.precision,l.precision)}),k=v(()=>l.controls&&l.controlsPosition==="right"),M=we(),g=Ve(),X=v(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(N(e))return"";if(b(e)){if(Number.isNaN(e))return"";y(l.precision)||(e=e.toFixed(l.precision))}return e}),O=(e,n)=>{if(y(n)&&(n=J.value),n===0)return Math.round(e);let i=String(e);const a=i.indexOf(".");if(a===-1||!i.replace(".","").split("")[a+n])return e;const w=i.length;return i.charAt(w-1)==="5"&&(i=`${i.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(i).toFixed(n))},U=e=>{if(N(e))return 0;const n=e.toString(),i=n.indexOf(".");let a=0;return i!==-1&&(a=n.length-i-1),a},x=(e,n=1)=>b(e)?O(e+l.step*n):o.currentValue,S=()=>{if(g.value||K.value)return;const e=l.modelValue||0,n=x(e);z(n)},P=()=>{if(g.value||B.value)return;const e=l.modelValue||0,n=x(e,-1);z(n)},$=(e,n)=>{const{max:i,min:a,step:p,precision:m,stepStrictly:w,valueOnClear:V}=l;let c=Number(e);if(N(e)||Number.isNaN(c))return null;if(e===""){if(V===null)return null;c=Fe(V)?{min:a,max:i}[V]:V}return w&&(c=Math.round(c/p)*p),y(m)||(c=O(c,m)),(c>i||c<a)&&(c=c>i?i:a,n&&u("update:modelValue",c)),c},z=e=>{var n;const i=o.currentValue,a=$(e);i!==a&&(o.userInput=null,u("update:modelValue",a),u("input",a),u("change",a,i),(n=h==null?void 0:h.validate)==null||n.call(h,"change").catch(p=>Z()),o.currentValue=a)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&z(n),o.userInput=null},re=()=>{var e,n;(n=(e=f.value)==null?void 0:e.focus)==null||n.call(e)},te=()=>{var e,n;(n=(e=f.value)==null?void 0:e.blur)==null||n.call(e)},le=e=>{u("focus",e)},ie=e=>{var n;u("blur",e),(n=h==null?void 0:h.validate)==null||n.call(h,"blur").catch(i=>Z())};return ye(()=>l.modelValue,e=>{o.currentValue=$(e,!0),o.userInput=null},{immediate:!0}),Ie(()=>{var e;const{min:n,max:i,modelValue:a}=l,p=(e=f.value)==null?void 0:e.input;if(p.setAttribute("role","spinbutton"),Number.isFinite(i)?p.setAttribute("aria-valuemax",String(i)):p.removeAttribute("aria-valuemax"),Number.isFinite(n)?p.setAttribute("aria-valuemin",String(n)):p.removeAttribute("aria-valuemin"),p.setAttribute("aria-valuenow",String(o.currentValue)),p.setAttribute("aria-disabled",String(g.value)),!b(a)&&a!=null){let m=Number(a);Number.isNaN(m)&&(m=null),u("update:modelValue",m)}}),Ee(()=>{var e;const n=(e=f.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),s({focus:re,blur:te}),(e,n)=>(_(),A("div",{class:C([t(d).b(),t(d).m(t(M)),t(d).is("disabled",t(g)),t(d).is("without-controls",!e.controls),t(d).is("controls-right",t(k))]),onDragstart:n[0]||(n[0]=D(()=>{},["prevent"]))},[e.controls?Y((_(),A("span",{key:0,role:"button","aria-label":t(T)("el.inputNumber.decrease"),class:C([t(d).e("decrease"),t(d).is("disabled",t(B))]),onKeydown:I(P,["enter"])},[F(t(Q),null,{default:j(()=>[t(k)?(_(),E(t(ke),{key:0})):(_(),E(t(Se),{key:1}))]),_:1})],42,Ke)),[[t(q),P]]):W("v-if",!0),e.controls?Y((_(),A("span",{key:1,role:"button","aria-label":t(T)("el.inputNumber.increase"),class:C([t(d).e("increase"),t(d).is("disabled",t(K))]),onKeydown:I(S,["enter"])},[F(t(Q),null,{default:j(()=>[t(k)?(_(),E(t(Pe),{key:0})):(_(),E(t(ze),{key:1}))]),_:1})],42,Me)),[[t(q),S]]):W("v-if",!0),F(t(Ae),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":t(X),placeholder:e.placeholder,disabled:t(g),size:t(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(D(S,["prevent"]),["up"]),I(D(P,["prevent"]),["down"])],onBlur:ie,onFocus:le,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var $e=Ce(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Re=De($e);export{Re as E};
