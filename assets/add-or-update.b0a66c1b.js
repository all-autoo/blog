import{f as w,r as n,ae as $,o as E,m as b,p as r,P as a,bJ as h,a2 as R,B as T,aN as K,an as f,bm as P,aO as j,U as H}from"./index.a7d776d7.js";import{E as M}from"./overlay.cbad9685.js";import{E as S,a as q}from"./form-item.2e6d27d6.js";import{E as J}from"./input-number.00ebcf35.js";import{E as z}from"./popover.d3d0fcff.js";import{E as G}from"./row.fde27793.js";/* empty css               */import{E as Q}from"./tree.1e55cf66.js";import{_ as W}from"./index.230105ef.js";import{u as X,a as Y,b as Z}from"./orgs.67a58ada.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./refs.24712170.js";import"./index.c373d696.js";import"./dropdown.a539ab46.js";import"./index.0ebdec77.js";const te={class:"popover-pop-body"},oe=f("\u5173\u95ED"),re=f("\u53D6\u6D88"),ae=f("\u786E\u5B9A"),le=w({__name:"add-or-update",emits:["refreshDataList"],setup(ne,{expose:y,emit:C}){const s=n(!1),u=n(!1),_=n([]),c=n(),i=n(),t=$({id:"",name:"",parentId:"",parentName:"",orderNum:0}),V=l=>{s.value=!0,t.id="",i.value&&i.value.resetFields(),l?k(l):p(),N()},N=()=>X().then(l=>{_.value=l.data}),k=l=>{Y(l).then(e=>{if(Object.assign(t,e.data),t.parentId=="")return p();c.value.setCurrentKey(t.parentId)})},p=()=>{t.parentId="",t.parentName=""},F=l=>{t.parentId=l.id,t.parentName=l.name,u.value=!1},A=n({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=()=>{i.value.validate(l=>{if(!l)return!1;Z(t).then(()=>{P.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{s.value=!1,C("refreshDataList")}})})})};return y({init:V}),(l,e)=>{const g=j,d=S,D=W,x=Q,m=H,I=G,B=z,L=J,O=q,U=M;return E(),b(U,{modelValue:s.value,"onUpdate:modelValue":e[10]||(e[10]=o=>s.value=o),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:r(()=>[a(m,{onClick:e[8]||(e[8]=o=>s.value=!1)},{default:r(()=>[re]),_:1}),a(m,{type:"primary",onClick:e[9]||(e[9]=o=>v())},{default:r(()=>[ae]),_:1})]),default:r(()=>[a(O,{ref_key:"dataFormRef",ref:i,model:t,rules:A.value,"label-width":"120px",onKeyup:e[7]||(e[7]=K(o=>v(),["enter"]))},{default:r(()=>[a(d,{prop:"name",label:"\u540D\u79F0"},{default:r(()=>[a(g,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(d,{prop:"parentName",label:"\u4E0A\u7EA7\u673A\u6784",class:"org-list"},{default:r(()=>[a(B,{ref:"orgListPopover",visible:u.value,"onUpdate:visible":e[5]||(e[5]=o=>u.value=o),placement:"bottom-start",trigger:"click",width:400,"popper-class":"popover-pop"},{reference:r(()=>[a(g,{modelValue:t.parentName,"onUpdate:modelValue":e[2]||(e[2]=o=>t.parentName=o),readonly:!0,placeholder:"\u4E0A\u7EA7\u673A\u6784",onClick:e[3]||(e[3]=o=>u.value=!0)},{suffix:r(()=>[t.parentId!==""?(E(),b(D,{key:0,icon:"icon-close-circle",onClick:e[1]||(e[1]=h(o=>p(),["stop"]))})):R("",!0)]),_:1},8,["modelValue"])]),default:r(()=>[T("div",te,[a(x,{ref_key:"orgListTree",ref:c,data:_.value,props:{label:"name",children:"childBranch"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:"",onCurrentChange:F},null,8,["data"])]),a(I,{justify:"end"},{default:r(()=>[a(m,{type:"primary",link:"",style:{"margin-right":"15px"},onClick:e[4]||(e[4]=o=>u.value=!1)},{default:r(()=>[oe]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1}),a(d,{prop:"orderNum",label:"\u6392\u5E8F"},{default:r(()=>[a(L,{modelValue:t.orderNum,"onUpdate:modelValue":e[6]||(e[6]=o=>t.orderNum=o),"controls-position":"right",min:0,label:"\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});var Ve=ee(le,[["__scopeId","data-v-6f370823"]]);export{Ve as default};
