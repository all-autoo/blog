import{f as C,r as n,ae as R,g as y,aI as L,o as d,m as f,p as o,Q as u,k as x,aJ as A,a3 as N,aE as U,an as c,cR as w,aV as $,aN as q,aO as K,V as O}from"./index.062059f7.js";import{E as S}from"./dialog.00de49d5.js";import"./overlay.343072da.js";/* empty css               */import{E as h,a as H}from"./form-item.145b9d23.js";import{u as J}from"./role.f819e9d3.js";const M=c("\u53D6\u6D88"),Q=c("\u786E\u5B9A"),Y=C({__name:"role",emits:["refreshDataList"],setup(T,{expose:_,emit:v}){const a=n(!1),m=n([]),r=n(),s=R({userId:"",roleIds:[]}),E=y(()=>{var t;return(t=L.userStore)==null?void 0:t.user.userId}),I=t=>{a.value=!0,s.userId=t,r.value&&r.value.resetFields(),F()},F=()=>J({queryUserId:E.value}).then(t=>{m.value=t.data.userRoles}),D=n({roleIds:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=()=>{r.value.validate(t=>{if(!t)return!1;w(s).then(()=>{$.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{a.value=!1,v("refreshDataList")}})})})};return _({init:I}),(t,e)=>{const b=q,g=K,V=h,k=H,p=O,B=S;return d(),f(B,{modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value=l),title:"\u8BBE\u7F6E\u7528\u6237\u89D2\u8272","close-on-click-modal":!1},{footer:o(()=>[u(p,{onClick:e[2]||(e[2]=l=>a.value=!1)},{default:o(()=>[M]),_:1}),u(p,{type:"primary",onClick:e[3]||(e[3]=l=>i())},{default:o(()=>[Q]),_:1})]),default:o(()=>[u(k,{ref_key:"dataFormRef",ref:r,model:s,rules:D.value,"label-width":"120px",onKeyup:e[1]||(e[1]=U(l=>i(),["enter"]))},{default:o(()=>[u(V,{label:"\u89D2\u8272",prop:"roleIds"},{default:o(()=>[u(g,{modelValue:s.roleIds,"onUpdate:modelValue":e[0]||(e[0]=l=>s.roleIds=l),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",multiple:"",clearable:""},{default:o(()=>[(d(!0),x(N,null,A(m.value,l=>(d(),f(b,{key:l.roleId,label:l.roleName,value:l.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});export{Y as default};
