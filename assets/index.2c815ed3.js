var _=Object.defineProperty,h=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var c=(o,r,a)=>r in o?_(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,s=(o,r)=>{for(var a in r||(r={}))g.call(r,a)&&c(o,a,r[a]);if(d)for(var a of d(r))x.call(r,a)&&c(o,a,r[a]);return o},p=(o,r)=>h(o,u(r));import{y as m,b_ as f,aV as n,b$ as w}from"./index.062059f7.js";const F=o=>{const e=((l,t)=>{for(const b in l)Object.getOwnPropertyDescriptor(t,b)||(t[b]=l[b]);return t})({createdIsNeed:!0,dataListUrl:"",isPage:!0,deleteUrl:"",primaryKey:"id",exportUrl:"",queryForm:{},dataList:[],order:"",asc:!1,current:1,size:10,total:0,pageSizes:[1,10,20,50,100,200],dataListLoading:!1,dataListSelections:[],apiDelete:null,apiList:null},o);m(()=>{e.createdIsNeed&&i()});const i=()=>{!e.apiList||(e.dataListLoading=!0,e.apiList(p(s({},e.queryForm),{size:e.size,current:e.current})).then(l=>{e.dataList=e.isPage?l.data.records:l.data,e.total=e.isPage?l.data.total:0}),e.dataListLoading=!1)};return{getDataList:()=>{e.current=1,i()},sizeChangeHandle:l=>{e.current=1,e.size=l,i()},currentChangeHandle:l=>{e.current=l,i()},selectionChangeHandle:l=>{e.dataListSelections=l.map(t=>e.primaryKey&&t[e.primaryKey])},sortChangeHandle:l=>{const{prop:t,order:b}=l;t&&b?(e.order=t,e.asc=b==="ascending"):e.order="",i()},deleteHandle:(l,t="\u5220\u9664")=>{f.confirm(`\u786E\u5B9A\u8FDB\u884C${t}\u64CD\u4F5C?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.apiDelete(l).then(()=>{n.success(`${t}\u6210\u529F`),i()})}).catch(()=>{})},deleteBatchHandle:l=>{let t=[];if(l)t=[l];else if(t=e.dataListSelections?e.dataListSelections:[],t.length===0){n.warning("\u8BF7\u9009\u62E9\u5220\u9664\u8BB0\u5F55");return}f.confirm("\u786E\u5B9A\u8FDB\u884C\u5220\u9664\u64CD\u4F5C?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{e.deleteUrl&&w.delete(e.deleteUrl,{data:t}).then(()=>{n.success("\u5220\u9664\u6210\u529F"),i()})}).catch(()=>{})}}};export{F as u};
