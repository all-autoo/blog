import{bu as d,f as A,r as p,ae as N,o as B,m as k,p as u,P as s,aN as U,an as E,bm as x,aO as P,cT as $,U as w}from"./index.a7d776d7.js";import{E as I}from"./overlay.cbad9685.js";/* empty css               */import{E as R,a as q}from"./form-item.2e6d27d6.js";import{E as K}from"./input-number.00ebcf35.js";import"./refs.24712170.js";import"./index.c373d696.js";const L=a=>d.get("/sys/post/"+a),O=a=>a.id?d.put("/sys/post",a):d.post("/sys/post",a),T=E("\u53D6\u6D88"),j=E("\u786E\u5B9A"),W=A({__name:"add-or-update",emits:["refreshDataList"],setup(a,{expose:V,emit:b}){const n=p(!1),r=p(),t=N({id:"",postCode:"",postName:"",sort:0,status:1}),c=l=>{n.value=!0,t.id="",r.value&&r.value.resetFields(),l&&v(l)},v=l=>{L(l).then(e=>{Object.assign(t,e.data)})},C=p({postCode:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],postName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=()=>{r.value.validate(l=>{if(!l)return!1;O(t).then(()=>{x.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{n.value=!1,b("refreshDataList")}})})})};return V({init:c}),(l,e)=>{const f=P,m=R,F=K,g=$,D=q,_=w,y=I;return B(),k(y,{modelValue:n.value,"onUpdate:modelValue":e[7]||(e[7]=o=>n.value=o),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:u(()=>[s(_,{onClick:e[5]||(e[5]=o=>n.value=!1)},{default:u(()=>[T]),_:1}),s(_,{type:"primary",onClick:e[6]||(e[6]=o=>i())},{default:u(()=>[j]),_:1})]),default:u(()=>[s(D,{ref_key:"dataFormRef",ref:r,model:t,rules:C.value,"label-width":"80px",onKeyup:e[4]||(e[4]=U(o=>i(),["enter"]))},{default:u(()=>[s(m,{label:"\u5C97\u4F4D\u7F16\u7801",prop:"postCode"},{default:u(()=>[s(f,{modelValue:t.postCode,"onUpdate:modelValue":e[0]||(e[0]=o=>t.postCode=o)},null,8,["modelValue"])]),_:1}),s(m,{label:"\u5C97\u4F4D\u540D\u79F0",prop:"postName"},{default:u(()=>[s(f,{modelValue:t.postName,"onUpdate:modelValue":e[1]||(e[1]=o=>t.postName=o)},null,8,["modelValue"])]),_:1}),s(m,{label:"\u6392\u5E8F",prop:"sort"},{default:u(()=>[s(F,{modelValue:t.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>t.sort=o),min:0},null,8,["modelValue"])]),_:1}),s(m,{label:"\u72B6\u6001",prop:"status"},{default:u(()=>[s(g,{modelValue:t.status,"onUpdate:modelValue":e[3]||(e[3]=o=>t.status=o),"dict-type":"post_status"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{W as default};
